{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/helper.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/';\n\nexport async function makeAxios(userRequest, page, per_page) {\n  const params = new URLSearchParams({\n    key: '44734756-d98c11aebccc1bae684f0851d',\n    q: userRequest,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: per_page,\n  });\n\n  return await axios.get(baseURL, { params });\n}\n","export function makeMarkupItem(obj) {\n  const {\n    comments,\n    downloads,\n    largeImageURL,\n    likes,\n    tags,\n    views,\n    webformatURL,\n  } = obj;\n\n  return `<li class=\"list__card\">\n  <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n      <ul>\n        <li class=\"list__card-headers\">\n          <h3>Likes</h3>\n          <h4>${likes}</h4>\n        </li>\n        <li class=\"list__card-headers\">\n          <h3>Views</h3>\n          <h4>${views}</h4>\n        </li>\n        <li class=\"list__card-headers\">\n          <h3>Comments</h3>\n          <h4>${comments}</h4>\n        </li>\n        <li class=\"list__card-headers\">\n          <h3>Downloads</h3>\n          <h4>${downloads}</h4>\n        </li>\n      </ul>\n      </li>`;\n}\n\nexport function makeMarkupItemS(arr) {\n  return arr.map(makeMarkupItem).join('');\n}\n\nexport function preLoader() {\n  return `<ul class=\"pre-loader\"><li class=\"loader\"></li></ul>`;\n}\n","export function addClassHidden(refsEl) {\n  refsEl.classList.add('visually-hidden');\n}\n\nexport function removeClassHidden(refsEl) {\n  refsEl.classList.remove('visually-hidden');\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { makeAxios } from './js/pixabay-api';\n\nimport * as renderFunc from './js/render-functions';\n\nimport axios from 'axios';\nimport * as classHidden from './js/helper';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 350,\n});\n\nlet page = 1;\nconst per_page = 15;\nlet request = '';\n\nconst refsEl = {\n  form: document.querySelector('.js-form'),\n  list: document.querySelector('.js-list'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nrefsEl.form.addEventListener('submit', handlerForm);\n\nasync function handlerForm(event) {\n  event.preventDefault();\n\n  const thisCurrentForm = event.currentTarget;\n\n  const { query } = thisCurrentForm.elements;\n\n  const normalizeInputValue = query.value.trim().toLowerCase();\n\n  request = normalizeInputValue;\n  if (!request) {\n    return;\n  }\n\n  const preLoader = renderFunc.preLoader();\n  refsEl.list.innerHTML = preLoader;\n\n  try {\n    ///\n    page = 1;\n    ///\n\n    const response = await makeAxios(request, page, per_page);\n\n    if (!response.data.hits.length) {\n      iziToast.error({\n        theme: 'dark',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fafafb',\n        messageSize: '16',\n        messageLineHeight: '1,5',\n        backgroundColor: '#ef4040',\n        maxWidth: '370',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n      });\n\n      refsEl.list.innerHTML = '';\n      return;\n    }\n\n    const markup = renderFunc.makeMarkupItemS(response.data.hits);\n    refsEl.list.innerHTML = markup;\n\n    let limit = per_page;\n\n    const totalPages = Math.ceil(response.data.totalHits / limit);\n\n    if (page >= totalPages) {\n      classHidden.addClassHidden(refsEl.loadMore);\n      return iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      classHidden.removeClassHidden(refsEl.loadMore);\n    }\n  } catch {\n    console.log(error);\n  } finally {\n    thisCurrentForm.reset();\n    lightbox.refresh();\n  }\n}\n\nrefsEl.loadMore.addEventListener('click', handlerLoadMoreBtn);\n\nasync function handlerLoadMoreBtn(event) {\n  ///\n  const preLoader = renderFunc.preLoader();\n  document.querySelector('.loaderR').innerHTML = preLoader;\n\n  classHidden.addClassHidden(refsEl.loadMore);\n\n  try {\n    ///\n    page += 1;\n    ///\n\n    const response = await makeAxios(request, page, per_page);\n\n    if (!response.data.hits.length) {\n      iziToast.error({\n        theme: 'dark',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fafafb',\n        messageSize: '16',\n        messageLineHeight: '1,5',\n        backgroundColor: '#ef4040',\n        maxWidth: '370',\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n      });\n\n      refsEl.list.innerHTML = '';\n      return;\n    }\n\n    const markup = renderFunc.makeMarkupItemS(response.data.hits);\n    refsEl.list.insertAdjacentHTML('beforeend', markup);\n\n    //\n    let limit = per_page;\n\n    const totalPages = Math.ceil(response.data.totalHits / limit);\n\n    if (page === totalPages) {\n      return iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      classHidden.removeClassHidden(refsEl.loadMore);\n    }\n  } catch {\n    console.log(error);\n  } finally {\n    lightbox.refresh();\n    document.querySelector('.loaderR').innerHTML = '';\n    //\n    const listItem = document.querySelector('.list__card');\n\n    const rect = listItem.getBoundingClientRect();\n\n    const doubleHeigth = rect.height * 2;\n\n    //\n    window.scrollBy({\n      top: doubleHeigth,\n      left: 100,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["baseURL","makeAxios","userRequest","page","per_page","params","axios","makeMarkupItem","obj","comments","downloads","largeImageURL","likes","tags","views","webformatURL","makeMarkupItemS","arr","preLoader","addClassHidden","refsEl","removeClassHidden","lightbox","SimpleLightbox","request","handlerForm","event","thisCurrentForm","query","renderFunc.preLoader","response","iziToast","markup","renderFunc.makeMarkupItemS","limit","totalPages","classHidden.addClassHidden","classHidden.removeClassHidden","handlerLoadMoreBtn","doubleHeigth"],"mappings":"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"}